<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Browse URLs</h1>
    <a routerLink="/submit" class="btn btn-primary">Submit a New URL</a>
  </div>
  <p class="lead">Here are the latest approved links shared by the community.</p>

  <!-- Show a loading spinner while data is being fetched -->
  <div *ngIf="isLoading" class="text-center py-5">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <!-- Show an error message if the API call fails -->
  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

  <!-- Once loaded, display the articles or a "not found" message -->
  <div *ngIf="!isLoading && !error">
    <div class="row" *ngIf="articles.length > 0; else noArticles">
      <!-- Loop through each article and create a card for it -->
      <div *ngFor="let article of articles" class="col-md-6 col-lg-4 mb-4">
        <div class="card h-100">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">{{ article.title }}</h5>
            <span class="badge bg-secondary mb-2 align-self-start">{{ article.categoryName }}</span>
            <p class="card-text flex-grow-1">{{ article.description }}</p>
            <a [href]="article.url" target="_blank" class="btn btn-outline-primary mt-auto">Visit Link</a>
          </div>
          <div class="card-footer text-muted">
            Shared by: {{ article.postedBy }}
          </div>
        </div>
      </div>
    </div>

    <!-- This block shows if the articles array is empty -->
    <ng-template #noArticles>
      <div class="text-center py-5">
        <h3>No URLs Found</h3>
        <p>There are no approved articles to display yet. Why not be the first to <a routerLink="/submit">submit one</a>?</p>
      </div>
    </ng-template>
  </div>
</div>