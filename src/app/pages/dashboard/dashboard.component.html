<div class="dashboard-container">
  <header class="dashboard-header">
    <h1>Article Analytics Dashboard</h1>
    <p class="dashboard-subtitle">Comprehensive overview of article metrics and performance</p>
  </header>

  <!-- Statistics Cards Section -->
  <section class="stats-section">
    <div class="stats-grid">
      <div class="stat-card approved">
        <div class="stat-icon">
          <i class="fas fa-check-circle"></i>
        </div>
        <div class="stat-content">
          <h3>Approved</h3>
          <p class="stat-number">{{ approvedArticlesCount }}</p>
        </div>
      </div>

      <div class="stat-card rejected">
        <div class="stat-icon">
          <i class="fas fa-times-circle"></i>
        </div>
        <div class="stat-content">
          <h3>Rejected</h3>
          <p class="stat-number">{{ rejectedArticlesCount }}</p>
        </div>
      </div>

      <div class="stat-card pending">
        <div class="stat-icon">
          <i class="fas fa-hourglass-half"></i>
        </div>
        <div class="stat-content">
          <h3>Pending</h3>
          <p class="stat-number">{{ pendingArticlesCount }}</p>
        </div>
      </div>

      <div class="stat-card rated">
        <div class="stat-icon">
          <i class="fas fa-star"></i>
        </div>
        <div class="stat-content">
          <h3>Rated</h3>
          <p class="stat-number">{{ ratedArticlesCount }}</p>
          <p class="stat-subtext">Avg: {{ averageRating | number:'1.1-1' }}</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Charts and Tables Section -->
  <section class="analytics-section">
    <div class="charts-grid">
      <!-- Article Categories Chart -->
      <div class="chart-card">
        <h2>Article Categories</h2>
        <div class="pie-chart-container" *ngIf="categoryData && categoryData.length > 0">
          <div class="pie-chart-wrapper">
            <div class="pie-chart" [style.background]="'conic-gradient(' + getConicGradient() + ')'">
              <div class="pie-center">
                <span class="pie-total">{{ approvedArticlesCount }}</span>
                <span class="pie-label">Articles</span>
              </div>
            </div>
            <div class="legend-container">
              <div *ngFor="let item of categoryData; let i = index" class="legend-item">
                <span class="legend-color" [style.background-color]="getColor(i)"></span>
                <span class="legend-text">{{ item.category }} ({{ item.count }})</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Top Categories Table -->
      <div class="table-card">
        <h2>Top Categories</h2>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Category</th>
                <th>Articles</th>
                <th>Percentage</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of categoryData">
                <td>{{ item.category }}</td>
                <td>{{ item.count }}</td>
                <td>{{ getPercentage(item.count) }}%</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Top Publishers Table -->
      <div class="table-card full-width">
        <h2>Top Publishers</h2>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th>Publisher</th>
                <th>Articles Submitted</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let publisher of topPublishers">
                <td>{{ publisher.publisher }}</td>
                <td>{{ publisher.count }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>
</div>
